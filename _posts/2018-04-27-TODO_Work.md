---
layout: post
title: 工作日常临时备忘
categories: Blog
description: 关于Github Pages博客的主要介绍
keywords: 博客简介
typora-root-url: ../
---
工作内容的临时备忘，主要是涉及到日常工作中需要注意的一些事情。

### ToDoList

6.便签贴纸   





### window10优化

win10启用wls2:https://altis.com.au/installing-ubuntu-bash-for-windows-10-wsl2-setup/


### Vs code扩展插件

[Ant Design Vue helper](https://marketplace.visualstudio.com/items?itemName=ant-design-vue.vscode-ant-design-vue-helper)



### Vue2.5语法

[作用域插槽](https://cn.vuejs.org/v2/guide/components-slots.html)

[子组件事件emit](https://cn.vuejs.org/v2/guide/components.html?#%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E6%8A%9B%E5%87%BA%E4%B8%80%E4%B8%AA%E5%80%BC)

![childe_father_event](/images/posts/child_father_event.png)

重点关注：10~12

### vue环境的配置

vue使用antd-design-admin做为中后台开发，vue的环境一定得安装好，通过科学上网，安装好vue环境。

`npm install -g @vue/cli`

`npm install vue-loader --save-dev`

比较肯爹地方是，源代码都是正确的，vue-cli和webpack的版本不一致的时候会导致，vue的项目无法编译。

~~版本不一致的问题，参考：[https://blog.csdn.net/u010616713/article/details/106966772](https://blog.csdn.net/u010616713/article/details/106966772)~~最后发现还是dependence依赖包"vue-loader:^4.17.5" 没有给定导致的，还是跟vue-cli的环境没有安装好导致的。

使用vue 2.0的antd-design-admin推荐使用的变量环境版本：

![webpack_version_vue372.png](/images/posts/webpack_version_vue372.png)

```c#
npm install -g --save-dev webpack@5.39.0
npm install -g --save-dev webpack-cli@4.7.2
npm install -g @vue/cli@4.5.13
```

![webpack_cli_install_42424](/images/posts/webpack_cli_install_42424.png)

### 微服务

ABP_Vnext微服务架构，参考文档：[ABP Framework微服务文档](https://docs.abp.io/zh-Hans/abp/latest/Samples/Microservice-Demo)

#### 端口号

01 **AuthServer**：8087   登陆验证

02 **PublicGateway**： 8088  微服务网关

03 **ProjectService**：8089  菜单权限

04 Shared 公共帮助类库

05 **BridgeService**：8090 桥梁服务

06 ReceAndSendMsgService ：8086  桥梁收发文服务

07 ProvincialLevelService ：8082 省级服务

08 ThirdPartyService ：8083 桥梁第三方服务

09 MonitoringService ：8084  桥梁监听服务

10 LogService ： 8085  通用日志服务

服务之间互相调用，07调用01服务。

前端vue开启之后，本地需要打开4个服务。

### 数据库表

sys_user_details   --> CompanyId ,UserId

sys_user     --> int_id  

sys_user_platform 

gdbs_db_v1_dongguan --->  sys_user_details


### PowerDesign

参考文档:[PowerDesign生成数据表](https://www.cnblogs.com/timingstarts/p/12640336.html)

[表结构设计](https://www.cnblogs.com/goloving/p/13570067.html)  ：物化路径设计 

### 目录树

[目录树增删改查](https://www.mysqltutorial.org/mysql-adjacency-list-tree/)

[Treeview](https://www.phpflow.com/php/treeview-using-bootstrap-treeview-php-mysql/)

[MultiLevelMenu](https://github.com/jdriesen/MultiLevelMenu)

[More](https://www.google.com/search?q=tree%20menu%20php%20mysql%20example%20site%3Agithub.com&newwindow=1&ei=5eN1YczSDe-kytMPvNKB2Ao&ved=2ahUKEwiM2aHlkeTzAhVvknIEHTxpAKsQ2wF6BAgnEAE&uact=5&oq=github&gs_lcp=Cgdnd3Mtd2l6EAMyEAguELEDEMcBENEDEEMQkwIyBQgAEJECMgQIABBDMgcIABCxAxBDMgQIABBDMgQIABBDMgQIABBDMgoIABCxAxCDARBDMggIABCABBCxAzIFCAAQgARKBAhBGABQAFgAYJMBaABwAHgAgAGuAogBrgKSAQMzLTGYAQA&sclient=gws-wiz)



### LinqSamples

[101-Linq-Samples](https://github.com/victorjspinto/101-Linq-Samples)





### 书目推荐

![redis_book_2827.png](/images/posts/redis_book_2827.png)

![queraCode_234224.png](/images/posts/queraCode_234224.png)



### Doing

根据桥梁ID请求桥梁所有监测版本数据

http://localhost:9999/102/api/bridgeService/automaticMonitoring/version?bridge_id=



#### 提交参数判断是否危桥

API地址：/api/bridgeService/BridgeDanger/IdentifyDangerousBridgeMonitoring

```tex
{
  "mainbeamExceedsLimit": true,
  "mainStructureOverrun": true,
  "bridgeId": 0,
  "identificationMethod": 0,
  "identificationTime": "2021-10-25T10:09:52.415Z",
  "testingInstitutionId": 0,
  "testingInstitutionName": "string",
  "sourceTableName": "string",
  "sourceTableKeyId": 0,
  "describe": "string",
  "currUserid": 0
}

        /// <summary>
        /// 主梁挠度超限
        /// </summary>
        public bool MainbeamExceedsLimit { get; set; }

        /// <summary>
        /// 主要受力构件结构变形变位等超限
        /// </summary>
        public bool MainStructureOverrun { get; set; }
        
  估  7 护栏防撞能力专项评估 8、人工认定 9、应急评估  10、运营监测（人工监测）
  认定方式 1、日常巡检2、定期检测	3、特殊检测 4、抗自然灾害能力评估 5、承载能力专项评估 6、独柱墩桥梁横向倾覆安全评估  7 护栏防撞能力专项评估 8、人工认定 9、应急评估  10、运营监测（人工监测）
  
```

图片上传路径![Uz8SPMkF3P](/images/posts/Uz8SPMkF3P.png)



```te
CREATE TABLE `bge_manual_monitor_point_detail` (
	`id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
	`point_name` VARCHAR(255) NULL DEFAULT NULL COMMENT '测点名称, 比如：墩-10A' COLLATE 'utf8mb4_unicode_ci',
	`statement` VARCHAR(20) NULL DEFAULT NULL COMMENT '沉降量' COLLATE 'utf8mb4_unicode_ci',
	`temperature` VARCHAR(20) NULL DEFAULT NULL COMMENT '温度' COLLATE 'utf8mb4_unicode_ci',
	`crackwidth` VARCHAR(20) NULL DEFAULT NULL COMMENT '裂缝宽度' COLLATE 'utf8mb4_unicode_ci',
	`distance` VARCHAR(20) NULL DEFAULT NULL COMMENT '位移' COLLATE 'utf8mb4_unicode_ci',
	`strain` VARCHAR(20) NULL DEFAULT NULL COMMENT '应变 ' COLLATE 'utf8mb4_unicode_ci',
	`angle_x` VARCHAR(20) NULL DEFAULT NULL COMMENT '倾角XS' COLLATE 'utf8mb4_unicode_ci',
	`angle_y` VARCHAR(20) NULL DEFAULT NULL COMMENT '倾角YS' COLLATE 'utf8mb4_unicode_ci',
	`cableforce` VARCHAR(20) NULL DEFAULT NULL COMMENT '索力' COLLATE 'utf8mb4_unicode_ci',
	`ws` VARCHAR(20) NULL DEFAULT NULL COMMENT '平均风速' COLLATE 'utf8mb4_unicode_ci',
	`wd` VARCHAR(20) NULL DEFAULT NULL COMMENT '风向' COLLATE 'utf8mb4_unicode_ci',
	`hygrometer` VARCHAR(20) NULL DEFAULT NULL COMMENT '湿度' COLLATE 'utf8mb4_unicode_ci',
	`height` VARCHAR(20) NULL DEFAULT NULL COMMENT '高度' COLLATE 'utf8mb4_unicode_ci',
	`overturn` VARCHAR(20) NULL DEFAULT NULL COMMENT '倾覆' COLLATE 'utf8mb4_unicode_ci',
	`create_time` DATETIME NULL DEFAULT NULL COMMENT '创建时间',
	`ver_name` VARCHAR(20) NULL DEFAULT NULL COMMENT '版本名称' COLLATE 'utf8mb4_unicode_ci',
	`ver_id` INT(11) NULL DEFAULT NULL COMMENT 'bge_manual_monitor主表id，版本id',
	`object_name` VARCHAR(50) NULL DEFAULT NULL COMMENT '对象名，比如:C匝道' COLLATE 'utf8mb4_unicode_ci',
	`update_time` DATETIME NULL DEFAULT NULL COMMENT '更新时间',
	`bge_id` INT(11) NULL DEFAULT NULL COMMENT '桥梁主表id',
	`create_userid` INT(11) NULL DEFAULT NULL COMMENT '创建人id',
	`update_userid` INT(11) NULL DEFAULT NULL COMMENT '更新人id',
	`delete_userid` INT(11) NULL DEFAULT NULL COMMENT '删除人id',
	`is_deleted` INT(1) NOT NULL DEFAULT '0' COMMENT '是否删除',
	PRIMARY KEY (`id`) USING BTREE,
	INDEX `ver_id` (`ver_id`) USING BTREE,
	INDEX `bge_id` (`bge_id`) USING BTREE
)
COMMENT='桥梁监测-->人工监测 详情表，测量点单位字典，参考mnt_point_channel_type_dict'
COLLATE='utf8mb4_unicode_ci'
ENGINE=MyISAM
;

```

```te
CREATE TABLE `bge_manual_monitor` (
	`id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
	`bge_id` INT(11) NULL DEFAULT NULL COMMENT '桥梁id',
	`ver_no` VARCHAR(500) NULL DEFAULT NULL COMMENT '版本名称，格式为“2013-03-18”' COLLATE 'utf8mb4_unicode_ci',
	`monitor_time` DATETIME NULL DEFAULT NULL COMMENT '监测时间 输出给前端格式为"2021-05-08"',
	`naodu_over` INT(1) UNSIGNED ZEROFILL NULL DEFAULT '0' COMMENT '挠度是否超限，1 是，0 否',
	`bianxing_over` INT(1) UNSIGNED ZEROFILL NULL DEFAULT '0' COMMENT '主要受力构件结构变形变位是否超限，1 是，0 否',
	`upload_file_url` VARCHAR(500) NULL DEFAULT NULL COMMENT '上传的相关报告附件，格式:.rar .zip .doc .docx .pdf .jpg' COLLATE 'utf8mb4_unicode_ci',
	`upload_img_url` VARCHAR(500) NULL DEFAULT NULL COMMENT '上传的“布点图”, 格式: .png .jpg' COLLATE 'utf8mb4_unicode_ci',
	`upload_time` DATETIME NULL DEFAULT NULL COMMENT '上传时间',
	`company_name` VARCHAR(255) NULL DEFAULT NULL COMMENT '监测单位名称' COLLATE 'utf8mb4_unicode_ci',
	`company_id` INT(11) NULL DEFAULT NULL COMMENT '监测单位ID',
	`create_userid` INT(11) NULL DEFAULT NULL COMMENT '创建用户',
	`create_time` DATETIME NULL DEFAULT NULL COMMENT '创建时间',
	`is_deleted` INT(1) NULL DEFAULT NULL COMMENT '是否删除,0为未删除，1为已删除，默认为0',
	`delete_userid` INT(11) NULL DEFAULT NULL COMMENT '删除人id',
	`delete_time` DATETIME NULL DEFAULT NULL COMMENT '删除时间',
	`update_userid` INT(11) NULL DEFAULT NULL COMMENT '修改人id',
	`update_time` DATETIME NULL DEFAULT NULL COMMENT '修改时间',
	PRIMARY KEY (`id`) USING BTREE,
	INDEX `bge_id` (`bge_id`) USING BTREE
)
COMMENT='桥梁监测--->人工监测，'
COLLATE='utf8mb4_unicode_ci'
ENGINE=MyISAM
;

```

