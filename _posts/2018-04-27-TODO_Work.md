---
layout: post
title: 工作日常临时备忘
categories: Blog
description: 关于Github Pages博客的主要介绍
keywords: 博客简介
typora-root-url: ../
---
工作内容的临时备忘，主要是涉及到日常工作中需要注意的一些事情。

### ToDoList

1.便签贴纸   

2.代码生成器还得优化，可以保存配置

3.AbpVnext [Serilog](https://blog.csdn.net/motl2000/article/details/107294864)配置 

4.[Linq](https://blog.csdn.net/pan_junbiao/article/details/79968226)

测点配置页面-新建版本(填写版本号)

获取版本号下面节点树(切换DropDownList)

首页详情List(首页详情页分页显示)

Excle批量导入(根据Excle模板批量插入数据库)





### window10优化

win10启用wls2:https://altis.com.au/installing-ubuntu-bash-for-windows-10-wsl2-setup/


### Vs code扩展插件

[Ant Design Vue helper](https://marketplace.visualstudio.com/items?itemName=ant-design-vue.vscode-ant-design-vue-helper)



### Vue2.5语法

[作用域插槽](https://cn.vuejs.org/v2/guide/components-slots.html)

[子组件事件emit](https://cn.vuejs.org/v2/guide/components.html?#%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E6%8A%9B%E5%87%BA%E4%B8%80%E4%B8%AA%E5%80%BC)

![childe_father_event](/images/posts/child_father_event.png)

重点关注：10~12

### vue环境的配置

vue使用antd-design-admin做为中后台开发，vue的环境一定得安装好，通过科学上网，安装好vue环境。

`npm install -g @vue/cli`

`npm install vue-loader --save-dev`

比较肯爹地方是，源代码都是正确的，vue-cli和webpack的版本不一致的时候会导致，vue的项目无法编译。

~~版本不一致的问题，参考：[https://blog.csdn.net/u010616713/article/details/106966772](https://blog.csdn.net/u010616713/article/details/106966772)~~最后发现还是dependence依赖包"vue-loader:^4.17.5" 没有给定导致的，还是跟vue-cli的环境没有安装好导致的。

使用vue 2.0的antd-design-admin推荐使用的变量环境版本：

![webpack_version_vue372.png](/images/posts/webpack_version_vue372.png)

```c#
npm install -g --save-dev webpack@5.39.0
npm install -g --save-dev webpack-cli@4.7.2
npm install -g @vue/cli@4.5.13
```

![webpack_cli_install_42424](/images/posts/webpack_cli_install_42424.png)

### 微服务

ABP_Vnext微服务架构，参考文档：[ABP Framework微服务文档](https://docs.abp.io/zh-Hans/abp/latest/Samples/Microservice-Demo)

#### 端口号

01 **AuthServer**：8087   登陆验证

02 **PublicGateway**： 8088  微服务网关

03 **ProjectService**：8089  菜单权限

04 Shared 公共帮助类库

05 **BridgeService**：8090 桥梁服务

06 ReceAndSendMsgService ：8086  桥梁收发文服务

07 ProvincialLevelService ：8082 省级服务

08 ThirdPartyService ：8083 桥梁第三方服务

09 MonitoringService ：8084  桥梁监听服务

10 LogService ： 8085  通用日志服务

服务之间互相调用，07调用01服务。

前端vue开启之后，本地需要打开4个服务。

### 数据库表

sys_user_details   --> CompanyId ,UserId

sys_user     --> int_id  

sys_user_platform 

gdbs_db_v1_dongguan --->  sys_user_details


### PowerDesign

参考文档:[PowerDesign生成数据表](https://www.cnblogs.com/timingstarts/p/12640336.html)

[表结构设计](https://www.cnblogs.com/goloving/p/13570067.html)  ：物化路径设计 

### 目录树

[目录树增删改查](https://www.mysqltutorial.org/mysql-adjacency-list-tree/)

[Treeview](https://www.phpflow.com/php/treeview-using-bootstrap-treeview-php-mysql/)

[MultiLevelMenu](https://github.com/jdriesen/MultiLevelMenu)

[More](https://www.google.com/search?q=tree%20menu%20php%20mysql%20example%20site%3Agithub.com&newwindow=1&ei=5eN1YczSDe-kytMPvNKB2Ao&ved=2ahUKEwiM2aHlkeTzAhVvknIEHTxpAKsQ2wF6BAgnEAE&uact=5&oq=github&gs_lcp=Cgdnd3Mtd2l6EAMyEAguELEDEMcBENEDEEMQkwIyBQgAEJECMgQIABBDMgcIABCxAxBDMgQIABBDMgQIABBDMgQIABBDMgoIABCxAxCDARBDMggIABCABBCxAzIFCAAQgARKBAhBGABQAFgAYJMBaABwAHgAgAGuAogBrgKSAQMzLTGYAQA&sclient=gws-wiz)



### LinqSamples

[101-Linq-Samples](https://github.com/victorjspinto/101-Linq-Samples)





### 书目推荐

![redis_book_2827.png](/images/posts/redis_book_2827.png)

![queraCode_234224.png](/images/posts/queraCode_234224.png)



### Doing

根据桥梁ID请求桥梁所有监测版本数据

http://localhost:9999/102/api/bridgeService/automaticMonitoring/version?bridge_id=



#### 提交参数判断是否危桥

API地址：/api/bridgeService/BridgeDanger/IdentifyDangerousBridgeMonitoring

```tex
{
  "mainbeamExceedsLimit": true,
  "mainStructureOverrun": true,
  "bridgeId": 0,
  "identificationMethod": 0,
  "identificationTime": "2021-10-25T10:09:52.415Z",
  "testingInstitutionId": 0,
  "testingInstitutionName": "string",
  "sourceTableName": "string",
  "sourceTableKeyId": 0,
  "describe": "string",
  "currUserid": 0
}

        /// <summary>
        /// 主梁挠度超限
        /// </summary>
        public bool MainbeamExceedsLimit { get; set; }

        /// <summary>
        /// 主要受力构件结构变形变位等超限
        /// </summary>
        public bool MainStructureOverrun { get; set; }
        
  估  7 护栏防撞能力专项评估 8、人工认定 9、应急评估  10、运营监测（人工监测）
  认定方式 1、日常巡检2、定期检测	3、特殊检测 4、抗自然灾害能力评估 5、承载能力专项评估 6、独柱墩桥梁横向倾覆安全评估  7 护栏防撞能力专项评估 8、人工认定 9、应急评估  10、运营监测（人工监测）
  
```

图片上传路径![Uz8SPMkF3P](/images/posts/Uz8SPMkF3P.png)



```sql
INSERT INTO bge_manual_monitor(bge_id, bge_name)
SELECT id, name FROM bge_info LIMIT 1,10
```

### 常用Code Snippets

```c#
 var userParam = new Dictionary<string, object>
            {
                { "id", id },//第三方用户id
               
            };
            var user = await HttpClientHelper.GetAsync<SysUser>(_httpClientFactory, _httpContext.HttpContext, userPath, PlatFormEnum.AuthService, userParam);
            
            var data = await (from i in _instituTionsRepository
                        join a in _sysAreaRepository on i.Area_Code equals a.AreaCode
                                where i.Id == id
                              select new ThirdUnitEditDto
                              {
                                  //单位名称
                                  UnitName = i.Inst_Name,
                                  //所属区域
                                  AreaCode = i.Area_Code,
                                  AreaName = a.AreaName,
                                  //单位地址
                                  unitAddress = i.Inst_Add,
                                  //单位电话
                                  UnitPhone = i.unit_phone,
                                  Id = i.Id,
                                  //负责人
                                  ContactName = i.Contact_Name,
                                  //联系方式
                                  ContactNumber = i.Contact_Number,
                                  //账号
                                  userName = user.UserName,
                                  //密码
                                  userPwd = user.UserPwd
                              }).ToListAsync();
            return OutputDto.ToResultSuccess(msg:"获取数据成功",data:data);
```

#### 表单保存

参考

\BridgeDangerService\BridgeDangerService.cs





